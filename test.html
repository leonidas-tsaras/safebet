<html>
<head>
    <meta charset="utf-8">
    <script>

      class Messager {
         constructor () {
            this.messages = [];
         }

         subscribe (message, callback) {
            this.messages.push({message:callback});
            //this.messages[0].message();
         }

         publish (message) {
            for(let m in this.messages) {
               this.messages[m].message();
            }

         }
      }

      class Subscriber {
         constructor() {

         }

         subscribe(messager, message) {
            let callback = function() {
                  console.log("subscriber: message received from messager");
            }            
            messager.subscribe(message, callback);
         }
      }

      class Temp {
         constructor() {

         }

         subscribe(messager, message) {
            let callback = function() {
                  console.log("temp: message received from messager");
            }            
            messager.subscribe(message, callback);
         }
      }

      class Publisher {
         constructor() {

         }

         publish() {
            messager.publish();
         }
      }

      var messager = new Messager();

      var subscriber = new Subscriber();
      subscriber.subscribe(messager, "test-message");

      var temp = new Subscriber();
      temp.subscribe(messager, "test-message");

      var publisher = new Publisher();
      //publisher.publish();

      messager.publish();

    </script>
</head>

<body>

</body>
</html>